(this.webpackJsonpclient0=this.webpackJsonpclient0||[]).push([[0],{103:function(e,c){},105:function(e,c){},122:function(e,c,t){"use strict";t.r(c);var a=t(0),n=t(58),s=t.n(n),l=(t(66),t(12)),r=t(59),i=t(32),j=t.n(i),o=t(1),d=Object(a.createContext)(),b=Object(r.io)("https://server-for-meetvax.herokuapp.com/"),O=function(e){var c=e.children,t=Object(a.useState)(!1),n=Object(l.a)(t,2),s=n[0],r=n[1],i=Object(a.useState)(!1),O=Object(l.a)(i,2),u=O[0],x=O[1],m=Object(a.useState)(),h=Object(l.a)(m,2),f=h[0],p=h[1],v=Object(a.useState)(""),g=Object(l.a)(v,2),C=g[0],N=g[1],y=Object(a.useState)({}),w=Object(l.a)(y,2),k=w[0],S=w[1],A=Object(a.useState)(""),E=Object(l.a)(A,2),I=E[0],R=E[1],P=Object(a.useRef)(),U=Object(a.useRef)(),V=Object(a.useRef)();Object(a.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){p(e),P.current.srcObject=e})),b.on("me",(function(e){return R(e)})),b.on("callUser",(function(e){var c=e.from,t=e.name,a=e.signal;S({isReceivingCall:!0,from:c,name:t,signal:a})}))}),[]);return Object(o.jsx)(d.Provider,{value:{call:k,callAccepted:s,myVideo:P,userVideo:U,stream:f,name:C,setName:N,callEnded:u,me:I,callUser:function(e){var c=new j.a({initiator:!0,trickle:!1,stream:f});c.on("signal",(function(c){b.emit("callUser",{userToCall:e,signalData:c,from:I,name:C})})),c.on("stream",(function(e){U.current.srcObject=e})),b.on("callAccepted",(function(e){r(!0),c.signal(e)})),V.current=c},leaveCall:function(){x(!0),V.current.destroy(),window.location.reload()},answerCall:function(){r(!0);var e=new j.a({initiator:!1,trickle:!1,stream:f});e.on("signal",(function(e){b.emit("answerCall",{signal:e,to:k.from})})),e.on("stream",(function(e){U.current.srcObject=e})),e.signal(k.signal),V.current=e}},children:c})},u=(t(115),t(123)),x=t(126),m=t(124),h=t(60),f=t(127);var p=function(){var e=Object(a.useContext)(d),c=e.answerCall,t=e.call,n=e.callAccepted;return Object(o.jsx)(u.a,{children:t.isReceivingCall&&!n&&Object(o.jsxs)(m.a,{className:"m-2",children:[Object(o.jsx)(h.a,{xs:6,children:Object(o.jsxs)("h4",{children:[t.name," is calling.."]})}),Object(o.jsx)(h.a,{xs:6,children:Object(o.jsxs)(f.a,{varient:"success",className:"p-1",onClick:c,children:[Object(o.jsx)("i",{class:"bi bi-telephone-inbound"})," \xa0 Receive"]})})]})})},v=t(125),g=t(61);var C=function(e){var c=e.children,t=Object(a.useContext)(d),n=t.me,s=t.callAccepted,r=t.callEnded,i=t.name,j=t.setName,b=t.leaveCall,O=t.callUser,x=Object(a.useState)(""),p=Object(l.a)(x,2),C=p[0],N=p[1],y=Object(a.useState)(!1),w=Object(l.a)(y,2),k=w[0],S=w[1];return Object(o.jsx)("div",{children:Object(o.jsxs)(u.a,{children:[Object(o.jsxs)(m.a,{children:[Object(o.jsx)(h.a,{xs:12,md:4,className:"offset-md-2",children:Object(o.jsxs)(v.a,{children:[Object(o.jsx)("h3",{children:"Account Info"}),Object(o.jsx)(v.a.Control,{className:k?"d-none":"",as:"textarea",rows:1,value:i,placeholder:"Enter your name",onChange:function(e){j(e.target.value)}}),Object(o.jsx)(g.CopyToClipboard,{text:n,onCopy:function(){S(!0)},children:Object(o.jsx)(f.a,{variant:k?"secondary":"primary",className:"mt-1",children:k?Object(o.jsxs)("div",{children:[Object(o.jsx)("i",{className:"bi bi-clipboard"})," \xa0 ",Object(o.jsx)("span",{children:"Copied"})]}):Object(o.jsxs)("div",{children:[Object(o.jsx)("i",{class:"bi bi-clipboard-check"})," \xa0 ",Object(o.jsx)("span",{children:"Copy ID"})]})})})]})}),Object(o.jsx)(h.a,{xs:12,md:4,children:Object(o.jsxs)(v.a,{children:[Object(o.jsx)("h3",{children:"Make a call"}),Object(o.jsx)(v.a.Control,{as:"textarea",rows:1,value:C,placeholder:"Paste friend's ID",onChange:function(e){N(e.target.value)}}),s&&!r?Object(o.jsxs)(f.a,{variant:"danger",className:"mt-1",onClick:b,children:[Object(o.jsx)("i",{className:"bi bi-telephone-x"})," \xa0 Hang up"]}):Object(o.jsxs)(f.a,{variant:"success",className:"mt-1",onClick:function(){return O(C)},children:[Object(o.jsx)("i",{className:"bi bi-telephone-outbound"})," \xa0 Call"]})]})})]}),Object(o.jsx)(m.a,{className:"justify-content-md-center",children:Object(o.jsx)(h.a,{xs:6,children:c})})]})})};var N=function(){var e=Object(a.useContext)(d),c=e.name,t=e.call,n=e.stream,s=e.myVideo,l=e.userVideo,r=e.callAccepted,i=e.CallEnded;return Object(o.jsx)(u.a,{children:Object(o.jsxs)(m.a,{className:"justify-content-center",children:[Object(o.jsx)(h.a,{xs:12,md:6,children:n&&Object(o.jsxs)(x.a,{children:[Object(o.jsx)(x.a.Header,{children:c||"You"}),Object(o.jsx)(x.a.Body,{className:"p-0",children:Object(o.jsx)("video",{className:"h-100 w-100",playsInline:!0,muted:!0,ref:s,autoPlay:!0})})]})}),r&&!i&&Object(o.jsx)(h.a,{xs:12,md:r&&!i?6:12,children:Object(o.jsxs)(x.a,{children:[Object(o.jsx)(x.a.Header,{children:t.name||"Person"}),Object(o.jsx)(x.a.Body,{className:"p-0",children:Object(o.jsx)("video",{className:"h-100 w-100",playsInline:!0,ref:l,autoPlay:!0})})]})})]})})};function y(){return Object(o.jsxs)(u.a,{fluid:!0,className:"bg-light p-1",children:[Object(o.jsx)(x.a.Header,{className:"bg-primary text-light m-0",children:Object(o.jsx)(m.a,{className:"justify-content-md-center",children:Object(o.jsx)(h.a,{sm:1,children:Object(o.jsx)("h1",{children:"MeetVAx"})})})}),Object(o.jsxs)(x.a.Body,{className:"bg-light text-dark m-0 mt-1",children:[Object(o.jsx)(N,{}),Object(o.jsx)(C,{children:Object(o.jsx)(p,{})})]})]})}s.a.render(Object(o.jsx)(O,{children:Object(o.jsx)(y,{})}),document.getElementById("root"))}},[[122,1,2]]]);
//# sourceMappingURL=main.219caae0.chunk.js.map